<!DOCTYPE html>
<html>
	<head>
  		<meta charset="utf-8">
  		<meta http-equiv="X-UA-Compatible" content="IE=edge">
  		<link rel="canonical" href="https://weather-pwa-sample.firebaseapp.com/final/">
  		<meta name="viewport" content="width=device-width, initial-scale=1.0">
  		
		<title>Club Management System</title>
  
		<link rel="stylesheet" type="text/css" href="styles/inline.css">

  		<!-- TODO add manifest here -->
  		<link rel="manifest" href="/manifest.json">
  		
		<!-- Add to home screen for Safari on iOS -->
		<meta name="apple-mobile-web-app-capable" content="yes">
  		<meta name="apple-mobile-web-app-status-bar-style" content="black">
  		<meta name="apple-mobile-web-app-title" content="Weather PWA">
  		<link rel="apple-touch-icon" href="images/icons/icon-152x152.png">
  		<meta name="msapplication-TileImage" content="images/icons/icon-144x144.png">
  		<meta name="msapplication-TileColor" content="#2F3BA2">
	</head>
<body>

<div class="loader">
	<svg viewBox="0 0 32 32" width="32" height="32">
      	<circle id="spinner" cx="16" cy="16" r="14" fill="none"></circle>
    	</svg>
</div>

	
	<!-- javascripts -->

	<!-- reports and schedules -->
	<script src="scripts/reports/oldreport.js"></script>
	<script src="scripts/reports/report.js"></script>
	<script src="scripts/schedules/schedule.js"></script>
	<script src="scripts/schedules/weeklyschedule.js"></script>

	<!-- headers -->
	<script src="scripts/headers/header.js"></script>

	<!-- state machine -->
  	<script src="scripts/fsm/state.js" ></script>
  	<script src="scripts/fsm/state_machine.js" ></script>
	
	<!-- Application states -->
  	<!-- <script src="scripts/application/states/global_application_state.js" ></script> -->
  	<script src="scripts/application/states/init_application_state.js" ></script>
  	
	<script src="scripts/application/application.js" ></script>

  	<script> 
	
	var APPLICATION = new Application();

  	// TODO add startup code here
	//FORECAST
/*
  	APPLICATION.mWeekReport.mForecastData = localStorage.mForecastData;
  	if (APPLICATION.mWeekReport.mForecastData) 
	{
		console.log("index forecast from localStorage");
    		APPLICATION.mWeekReport.mForecastData = JSON.parse(APPLICATION.mWeekReport.mForecastData);
    		
		APPLICATION.mWeekReport.mForecastData.forEach(function(event_record) 
		{
      			APPLICATION.mWeekReport.getForecast(event_record.key, event_record.label);
    		});
  	} 
	else 
	{
		console.log("update forecastCard from initial");
		APPLICATION.mWeekReport.updateForecastCard(APPLICATION.mWeekReport.initialForecastData);
    		APPLICATION.mWeekReport.mForecastData = 
		[
      			{key: APPLICATION.mWeekReport.initialForecastData.key, label: APPLICATION.mWeekReport.initialForecastData.label}
    		];
    		APPLICATION.mWeekReport.saveForecastToLocalStorage();
  	}

        //SCHEDULE
        APPLICATION.mWeekReport.mScheduleData = localStorage.mScheduleData;
        if (APPLICATION.mWeekReport.mScheduleData)
        {
                console.log("index schedule from localStorage");
                APPLICATION.mWeekReport.mScheduleData = JSON.parse(APPLICATION.mWeekReport.mScheduleData);

                APPLICATION.mWeekReport.mScheduleData.forEach(function(event_record)
                {
                        APPLICATION.mWeekReport.getSchedule(event_record.key, event_record.label);
                });
        }
        else
        {
                console.log("update scheduleCard from initial");
                APPLICATION.mWeekReport.updateScheduleCard(APPLICATION.mWeekReport.initialScheduleData);
                APPLICATION.mWeekReport.mScheduleData =
                [
                        {key: APPLICATION.mWeekReport.initialScheduleData.key, label: APPLICATION.mWeekReport.initialScheduleData.label}
                ];
                APPLICATION.mWeekReport.saveScheduleToLocalStorage();
        }
*/
  	// TODO add service worker code here
  	if ('serviceWorker' in navigator) 
	{
    		navigator.serviceWorker
             	.register('./service-worker.js')
             	.then(function() 
		{ 
			console.log('Service Worker Registered'); 
		});
	}

	</script>
</body>
</html>
